# NFT拍卖系统 - 快速部署指南

## 🚀 5分钟快速部署

### 第一步：准备环境
1. 打开 [Remix IDE](https://remix.ethereum.org/)
2. 创建新工作区或打开现有项目
3. 上传所有合约文件到Remix

### 第二步：部署实现合约
1. **编译 TestNftAuction.sol**
   - 选择编译器版本：0.8.26
   - 点击编译

2. **部署合约**
   - 切换到"Deploy & Run Transactions"标签
   - 选择TestNftAuction合约
   - 构造函数参数：`0x0BF3dE8c5D3e8A2B34D2BEeB17ABfCeBaf363A59`
   - 点击"Deploy"
   - **记录实现合约地址**

### 第三步：部署工厂合约
1. **编译 NftAuctionFactory.sol**
   - 选择编译器版本：0.8.26
   - 点击编译

2. **部署合约**
   - 选择NftAuctionFactory合约
   - 构造函数参数：
     - `_ccipRouter`: `0x0BF3dE8c5D3e8A2B34D2BEeB17ABfCeBaf363A59`
     - `_auctionImplementation`: 第二步的实现合约地址
   - 点击"Deploy"
   - **记录工厂合约地址**

### 第四步：创建拍卖
1. **铸造NFT**
   ```javascript
   // 调用工厂合约的mintNFT函数
   mintNFT(
     "您的地址",           // to地址
     "https://example.com/nft/1"  // URI
   )
   ```

2. **授权NFT转移**
   ```javascript
   // 调用工厂合约的setApprovalForAll函数
   setApprovalForAll(
     "工厂合约地址",  // operator
     true            // approved
   )
   ```

3. **创建拍卖**
   ```javascript
   // 调用工厂合约的createAuction函数
   createAuction(
     "工厂合约地址",  // NFT合约地址
     1,              // tokenId
     3600,           // 持续时间（秒）
     "10000000000000000"  // 起拍价（0.01 ETH）
   )
   ```

4. **获取代理合约地址**
   ```javascript
   // 调用工厂合约的getAllAuctions函数
   getAllAuctions()
   ```

### 第五步：测试拍卖功能
1. **加载代理合约**
   - 在"At Address"字段中输入代理合约地址
   - 选择TestNftAuction合约
   - 点击"At Address"

2. **测试竞拍功能**
   ```javascript
   // 调用bid函数（使用ETH竞拍）
   bid(
     "0x0000000000000000000000000000000000000000",  // ETH地址
     "20000000000000000",  // 竞拍金额（0.02 ETH）
     {value: "20000000000000000"}  // 发送ETH
   )
   ```

3. **查看拍卖状态**
   ```javascript
   // 调用auction函数查看拍卖信息
   auction()
   ```

## 📋 测试清单

### 基础功能测试
- [ ] 工厂合约部署成功
- [ ] NFT铸造成功
- [ ] 拍卖创建成功
- [ ] 竞拍功能正常
- [ ] 拍卖状态更新正确

### 高级功能测试
- [ ] 跨链功能（需要测试网络）
- [ ] 价格预言机
- [ ] 合约升级

## 🔧 常用参数

### 地址参数
```javascript
// CCIP路由地址（本地测试）
CCIP_ROUTER = "0x0BF3dE8c5D3e8A2B34D2BEeB17ABfCeBaf363A59"

// ETH地址
ETH_ADDRESS = "0x0000000000000000000000000000000000000000"
```

### 价格参数
```javascript
// 价格转换（wei）
0.01 ETH = "10000000000000000"
0.02 ETH = "20000000000000000"
0.05 ETH = "50000000000000000"
```

### 时间参数
```javascript
// 时间转换（秒）
1分钟 = 60
1小时 = 3600
1天 = 86400
```

## 🐛 常见问题解决

### 问题1：部署失败
**解决方案**：
- 检查编译器版本是否为0.8.26
- 确认所有依赖库已正确导入
- 检查构造函数参数格式

### 问题2：拍卖创建失败
**解决方案**：
- 确认NFT已铸造
- 检查NFT授权状态
- 验证参数格式和范围

### 问题3：竞拍失败
**解决方案**：
- 确认拍卖已开始且未结束
- 检查竞拍金额是否足够
- 验证发送的ETH数量

### 问题4：看不到拍卖接口
**解决方案**：
- 确认使用的是代理合约地址
- 选择正确的合约类型（TestNftAuction）
- 检查合约地址是否正确

## 📞 技术支持

如果遇到问题，请检查：
1. 合约编译是否成功
2. 部署参数是否正确
3. 网络连接是否正常
4. 账户余额是否充足

---

**快速指南版本**: v1.0  
**适用环境**: Remix IDE  
**测试网络**: 本地网络/测试网络
